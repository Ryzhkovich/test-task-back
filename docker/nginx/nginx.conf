# Generated by nginxconfig.io
# https://www.digitalocean.com/community/tools/nginx?domains.0.server.domain=dev1.mozg.rest&domains.0.server.path=%2Fusr%2Fshare%2Fnginx%2Fhtml&domains.0.server.redirectSubdomains=false&domains.0.https.letsEncryptEmail=k.ostroverhov%40mozg.rest%2Cbmv%40mozg.rest&domains.0.php.phpServer=127.0.0.1%3A9000&domains.0.logging.accessLog=true&domains.0.logging.errorLog=true&global.https.sslProfile=modern&global.https.ocspCloudflare=false&global.https.ocspGoogle=false&global.https.ocspOpenDns=false&global.https.letsEncryptRoot=%2Fvar%2Flib%2Fletsencrypt%2F&global.logging.logNotFound=true&global.nginx.user=nginx&global.docker.dockerfile=true&global.app.lang=ru

user                 nginx;
pid                  /var/run/nginx.pid;
worker_processes     auto;
worker_rlimit_nofile 65535;

# Load modules
include              /etc/nginx/modules-enabled/*.conf;

events {
    multi_accept       on;
    worker_connections 65535;
}

http {
    charset                utf-8;
    sendfile               on;
    tcp_nopush             on;
    tcp_nodelay            on;
    server_tokens          off;
    types_hash_max_size    2048;
    types_hash_bucket_size 64;
    client_max_body_size   500M;
    client_body_buffer_size 50M;

    # MIME
    include                /etc/nginx/mime.types;
    default_type           application/octet-stream;

	log_format  main  '$remote_addr - $remote_user [$time_local] "$scheme" $http_host  $request_method "$request_uri" '
                      '$status $body_bytes_sent $gzip_ratio "$http_referer" $proxy_host $upstream_cache_status '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    # Logging
    access_log             /var/log/nginx/access.log main;
    error_log              /var/log/nginx/error.log warn;

    # SSL
    #ssl_session_timeout		1d;
    #ssl_session_cache		shared:SSL:10m;
    #ssl_session_tickets		off;
    #ssl_protocols			TLSv1.2 TLSv1.3;
	#ssl_ciphers				HIGH:!aNULL:!MD5;
    #ssl_certificate         /etc/letsencrypt/live/mozg.rest/fullchain.pem;
    #ssl_certificate_key     /etc/letsencrypt/live/mozg.rest/privkey.pem;
    #ssl_trusted_certificate /etc/letsencrypt/live/mozg.rest/chain.pem;

    # OCSP Stapling
    #ssl_stapling           on;
    #ssl_stapling_verify    on;

	# gzip
	gzip            on;
	gzip_vary       on;
#	gzip_proxied    any;
	gzip_comp_level 6;
	gzip_types      text/plain text/css text/xml application/json application/javascript application/rss+xml application/atom+xml image/svg+xml;

    # Load configs
    include                /etc/nginx/conf.d/*.conf;
    include                /etc/nginx/sites-enabled/*;
}
